---
import type { CollectionEntry } from 'astro:content';
import ReadingTime from './ReadingTime.astro';

interface Props {
  post: CollectionEntry<'posts'>;
}

const { post } = Astro.props;
const { title, excerpt, coverImage, date, time, categories } = post.data;

function formatDate(dateStr: string): string {
  const d = new Date(dateStr);
  return d.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' });
}
---

<article class="group">
  <a
    href={`/posts/${post.slug}`}
    class="flex flex-col md:flex-row gap-4 p-4 rounded-3xl shadow-lg bg-white dark:bg-slate-800 transition duration-300 ease-in-out hover:scale-[1.02] no-underline"
  >
    <img
      src={coverImage}
      alt={title}
      width="200"
      height="200"
      class="w-full md:w-48 h-48 object-cover rounded-2xl"
    />
    <div class="flex flex-col flex-1 justify-between py-2">
      <div>
        <h2 class="text-xl font-bold text-foreground group-hover:text-primary transition-colors m-0 mb-2">
          {title}
        </h2>
        <p class="text-muted-foreground text-sm line-clamp-2 m-0">
          {excerpt}
        </p>
      </div>
      <div class="flex flex-wrap gap-2 mt-4">
        {categories.map((category) => (
          <span class="inline-flex items-center rounded-full bg-blue-50 dark:bg-blue-900/30 px-2 py-1 text-xs font-medium text-blue-700 dark:text-blue-300 ring-1 ring-inset ring-blue-700/10 dark:ring-blue-300/20">
            {category}
          </span>
        ))}
      </div>
      <div class="flex justify-between items-center text-sm text-muted-foreground mt-4">
        <span>{formatDate(date)}</span>
        <ReadingTime minutes={time} />
      </div>
    </div>
  </a>
</article>
